<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

<html>

<head>

    <title>D3</title>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/style.css') }}">

	<script src="{{url_for('static', filename='scripts/script.js') }}"></script>
	<script src="https://d3js.org/d3.v5.min.js"></script>
	

</head>

<body>

<div id="success"><h2>Assignment 01</h2></div>
	
	<svg width="1080" height="1080">
	</svg>
    <script type="text/javascript">
	
		$(document).ready(function()
		{
			$.ajax({
				//Get all the countries from the countries page.
				url: "http://10.25.138.109/countries",
				//force to handle it as text
				dataType: "text",
				success: function(data) {

					//data downloaded so we call parseJSON function 
					//and pass downloaded data
					var json = $.parseJSON(data);
					
					
					var g = d3.select("svg").selectAll("g").data(json);
		
					var en = g.enter().append("g")
						.attr("transform",function(d){
						return "translate("+ (Math.random() * 900) + 40 + "," + (Math.random() * 900) + 40 +")" 
					})
					.on("mouseover", function(){return tooltip.style("visibility", "visible");})
					.on("mouseout", function(){return tooltip.style("visibility", "hidden");});
					
					var circle = en.append("circle")
						.attr("r",function(d){ return Math.random() * 20 })
						.attr("fill",function(d,i){ return i % 2 == 0 ? "red" : "blue" });
						
						
						
						
					var tooltip = d3.select("body")
						.append("div")
						.style("position", "absolute")
						.style("z-index", "10")
						.style("visibility", "hidden")
						.text("a simple tooltip");
						//.append("text").text(function(d){ return d.name })
						
						/*
					var path = d3.selectAll('path')
						.enter()
						.append('path')
						.on('mouseover', function (d, i) {
							d3.select(this).transition()
								.duration('50')
								.attr('opacity', '.85')
								.append("text").text(function(d){ return d.name })});*/
					
					//en.append("text").text(function(d){ return d.name });					
				
				}
			});		
		
		
		//Extra code - For reference
		/*
			$.ajax({
			  type: 'GET',
			  url: 'http://10.25.138.109/countries',
			  data: {get_param: 'value'},
			  dataType: 'json',
			  success: function (data) {
			  $.each(data, function(index, element) {
				$('#success').append($('<div>', {
					text: element.name
				}));
			  });
			  }
			});
			
			var data = [
			  { "name" : "Canada" },
			  { "name" : "New Zealand" }
			];

			var g = d3.select("svg").selectAll("g").data(data);
		
			var en = g.enter().append("g")
				.attr("transform",function(d){ 
				return "translate("+ (Math.random() * 100) + 40 + "," + (Math.random() * 100) + 40 +")" 
			});
			
			var circle = en.append("circle")
				.attr("r",function(d){ return Math.random() * 20 })
				.attr("fill",function(d,i){ return i % 2 == 0 ? "red" : "blue" });
			
			en.append("text").text(function(d){ return d.name });*/
					
				//});
			//}
		});
	
    </script>


</body>

</html>